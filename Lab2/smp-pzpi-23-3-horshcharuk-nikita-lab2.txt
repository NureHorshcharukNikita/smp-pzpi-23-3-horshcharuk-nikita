Міністерство освіти і науки України 
Харківський національний університет радіоелектроніки 


Кафедра програмної інженерії
 


Звіт
з лабораторної роботи № 2
з дисципліни «Скриптові мови програмування»






Виконав:                                                           	     Перевірив:
ст. гр. ПЗПІ-23-3                                    	       	     ст. викл. Сокорчук І. П.
Горщарук Н. С.







Харків 2025
1 ІСТОРІЯ ЗМІН
№ДатаВерсія звітуОпис змін та виправлень119.04.20250.1Оформлено повністю текстовий звіт211.05.20250.2Частково оформлено звіт відповідно до вимог324.05.20250.3Остаточно оформлено звіт відповідно до вимог, додано відео

2 ЗАВДАННЯ
     - Розробити консольний застосунок "Продовольчий магазин 'Весна'" мовою PHP, який виконується на VPS-сервері.
       - Після запуску виводиться головне меню з варіантами дій: вибір товарів, отримання рахунку, налаштування профілю, вихід.
       - Здійснюється обробка введення користувача: некоректні команди мають викликати повідомлення про помилку та повторний запит.
       - При виборі пункту "1" відкривається перелік товарів з можливістю додавання до кошика або видалення (в разі введення кількості 0).
       - Кошик динамічно оновлюється, відображається після кожної дії.
       - Пункт "2" виводить підсумковий рахунок: №, назва, ціна, кількість, загальна вартість товару, та загальна сума до сплати.
       - Пункт "3" дозволяє ввести імʼя та вік користувача. Валідація: імʼя не порожнє та містить хоча б одну літеру, вік від 7 до 150 років.
       - Всі введення перевіряються на коректність.
       - Програма завершується командою "0".
       - Скрипт працює в CLI-режимі та постійно чекає на введення користувача до завершення.
     

3 ОПИС ВИКОНАНОЇ РОБОТИ
     - Розроблено PHP-скрипт, який запускається в терміналі й дозволяє взаємодіяти з користувачем у вигляді меню.
       - Для збереження товарів створено масив з унікальними ID, назвами та цінами.
       - Реалізовано функціонал кошика: додавання товарів, оновлення кількості або видалення позицій.
       - Кожна команда меню обробляється через switch або логічні перевірки.
       - Функція showMainMenu() виводить постійне головне меню для користувача.
       - Функція chooseProduct() дозволяє обрати товар, перевірити його існування, ввести кількість та оновити кошик.
       - Всі виводи у термінал форматовані з урахуванням довжини назви товарів (функція mb_str_pad).
       - У підсумковому рахунку (getFinalBill) виводиться таблиця з усіма товарами у кошику та обчислюється сума.
       - Функція setupProfile() перевіряє ім’я на відповідність регулярному виразу, а вік — на обмеження вікового діапазону.
       - Всі дії користувача супроводжуються підказками та перевірками.
       - Програма побудована із чіткою структурою, що дозволяє легко розширювати функціональність.
     - Результати роботи подано у вигляді рисунків Б1-Б10.

4 ВИСНОВКИ
     - У результаті виконання лабораторної роботи №2 було створено CLI-застосунок мовою PHP.
     - Програма реалізує типову модель взаємодії з користувачем для невеликого торгового інтерфейсу.
     - Отримано навички перевірки введення, побудови меню, реалізації кошика та обробки помилок у консолі.
     - Забезпечено логіку перевірки коректності введених даних та відображення відповідей у форматованому вигляді.
     - Розроблений скрипт повністю відповідає технічному завданню та може бути використаний як основа для складніших термінальних застосунків.








ДОДАТОК А
Відеозапис
     Відеозапис презентації результатів лабораторної роботи: https://youtu.be/Nw8txE7au3o

Хронологічний опис відеозапису:
00:00 — Вступ та опис завдання.
00:15 — Початок пояснення коду починаючи з головного цикла.
02:30 — Пояснення про функцію показати продукти.
06:30 — Пояснення про функцію обрати продукт.
08:30 — Пояснення про функцію показати кошик.
09:30 — Пояснення про функцію отримати фінальний підрахунок.
11:30 — Пояснення про функцію встановлення профілю.
13:10 — Тестування програми.


ДОДАТОК Б
Графічні матеріали

Рисунок Б.1 — Головне меню


Рисунок Б.2 — Перелік товарів


Рисунок Б.3 — Обрано товар Сир білий та кількість 20


Рисунок Б.4 — Обрано товар Молоко пастеризоване та кількість 4


Рисунок Б.5 — Обрано кількість 0 для вже існуючого продукту в кошику


Рисунок Б.6 — Обрано кількість не в діапазоні допустимих значень


Рисунок Б.7 — Підсумковий рахунок


Рисунок Б.8 — Обрано пункт в меню для редагування профілю


Рисунок Б.9 — Попередження про некоректне введення імені


Рисунок Б.10 — Попередження про те що вік не входить в діапазон значень


ДОДАТОК В
Програмний код
   В.1 Головний файл на php
   GitHub репозиторій: https://github.com/NureHorshcharukNikita/smp-pzpi-23-3-horshcharuk-nikita/blob/main/Lab2/smp-pzpi-23-3-horshcharuk-nikita-lab2/smp-pzpi-23-3-horshcharuk-nikita-lab2.php
      1 <?php
      2     $products = [
      3         1 => ["name" => "Молоко пастеризоване", "price" => 12],
      4         2 => ["name" => "Хліб чорний", "price" => 9],
      5         3 => ["name" => "Сир білий", "price" => 21],
      6         4 => ["name" => "Сметана 20%", "price" => 25],
      7         5 => ["name" => "Кефір 1%", "price" => 19],
      8         6 => ["name" => "Вода газована", "price" => 18],
      9         7 => ["name" => "Печиво \"Весна\"", "price" => 14]
     10     ];
     11
     12     $cart = [];
     13     $userProfile = ["name" => "", "age" => 0];
     14
     15     if (!function_exists('mb_str_pad')) {
     16         function mb_str_pad($input, $pad_length, $pad_string = ' ', $pad_type = STR_PAD_RIGHT) {
     17             $diff = $pad_length - preg_match_all('/./us', $input);
     18             if ($diff > 0) {
     19                 if ($pad_type === STR_PAD_RIGHT) {
     20                     return $input . str_repeat($pad_string, $diff);
     21                 }
     22                 else if ($pad_type === STR_PAD_LEFT) {
     23                     return str_repeat($pad_string, $diff) . $input;
     24                 }
     25                 else if ($pad_typ === STR_PAD_BOTH) {
     26                     $left = floor($diff / 2);
     27                     $right = $diff - $left;
     28                     return str_repeat($pad_string, $left) . $input . str_repeat($pad_string, $right);
     29                 }
     30             }
     31
     32             return $input;
     33         }
     34     }
     35
     36     function getMaxNameLength($products) {
     37         return max(array_map(function($p) { return preg_match_all('/./us', $p['name']); }, $products));
     38     }
     39
     40     function showMainMenu() {
     41         echo "################################\n";
     42         echo "# ПРОДОВОЛЬЧИЙ МАГАЗИН \"ВЕСНА\" #\n";
     43         echo "################################\n";
     44         echo "1 Вибрати товари\n";
     45         echo "2 Отримати пiдсумковий рахунок\n";
     46         echo "3 Налаштувати свiй профiль\n";
     47         echo "0 Вийти з програми\n";
     48         echo "Введiть команду: ";
     49     }
     50
     51     function showProducts($products) {
     52         $maxNameLength = getMaxNameLength($products) + 2;
     53
     54         echo "№  " . mb_str_pad("НАЗВА", $maxNameLength) . "ЦІНА\n";
     55
     56         foreach ($products as $id => $product) {
     57             echo mb_str_pad($id, 3) . mb_str_pad($product['name'], $maxNameLength) . mb_str_pad($product['price'], 6) . "\n";
     58         }
     59
     60         echo "   " . str_repeat("-", 11) . "\n";
     61         echo "0  ПОВЕРНУТИСЯ\n";
     62         echo "Виберiть товар: ";
     63     }
     64
     65     function showCart($cart, $products) {
     66         if (empty($cart)) {
     67             echo "КОШИК ПОРОЖНІЙ\n";
     68         } else {
     69             $maxNameLength = getMaxNameLength($products) + 2;
     70
     71             echo "У КОШИКУ:\n";
     72             echo mb_str_pad("НАЗВА", $maxNameLength) . "КІЛЬКІСТЬ\n";
     73             foreach ($cart as $id => $quantity) {
     74                 echo mb_str_pad($products[$id]['name'], $maxNameLength) . $quantity . "\n";
     75             }
     76         }
     77
     78         echo "\n";
     79     }
     80
     81     function getFinalBill($products, $cart) {
     82         if (empty($cart)) {
     83             echo "КОШИК ПОРОЖНІЙ\n";
     84             return;
     85         }
     86
     87         $cartProducts = array_intersect_key($products, $cart);
     88         $maxNameLength = getMaxNameLength($cartProducts) + 2;
     89
     90         echo "№  " . mb_str_pad("НАЗВА", $maxNameLength) . "ЦІНА  КІЛЬКІСТЬ  ВАРТІСТЬ\n";
     91         $total = 0;
     92         $i = 1;
     93         foreach ($cart as $id => $quantity) {
     94             $name = $products[$id]['name'];
     95             $price = $products[$id]['price'];
     96             $cost = $price * $quantity;
     97             echo mb_str_pad($i++, 3) . mb_str_pad($name, $maxNameLength) . mb_str_pad($price, 6) . mb_str_pad($quantity, 11) . $cost . "\n";
     98             $total += $cost;
     99         }
    100         echo "РАЗОМ ДО СПЛАТИ: $total\n";
    101     }
    102
    103     function setupProfile(&$userProfile) {
    104         do {
    105             echo "Ваше iм'я: ";
    106             $name = trim(readline());
    107
    108             if (!preg_match('/^[a-zA-Zа-яА-ЯіІїЇєЄ][a-zA-Zа-яА-ЯіІїЇєЄ\'\- ]*$/u', $name)) {
    109                 echo "ПОМИЛКА! Імʼя повинно починатись з літери і може містити лише літери, апостроф «'», дефіс «-», пробіл!\n\n";
    110             }
    111         } while (!preg_match('/^[a-zA-Zа-яА-ЯіІїЇєЄ][a-zA-Zа-яА-ЯіІїЇєЄ\'\- ]*$/u', $name));
    112
    113         do {
    114             echo "Ваш вiк: ";
    115             $age = (int)trim(fgets(STDIN));
    116             if ($age < 7 || $age > 150) {
    117                 echo "ПОМИЛКА! Користувач повинен мати вік від 7 та до 150 років\n\n";
    118             }
    119         } while ($age < 7 || $age > 150);
    120
    121         $userProfile['name'] = $name;
    122         $userProfile['age'] = $age;
    123
    124         echo "\nВаше імʼя: " . $name . "\n";
    125         echo "Ваш вік: " . $age . "\n";
    126     }
    127
    128     function chooseProduct($products, &$cart) {
    129         while (true) {
    130             showProducts($products);
    131             $choice = trim(fgets(STDIN));
    132
    133             if ($choice == '0') {
    134                 break;
    135             }
    136
    137             if (!isset($products[(int)$choice])) {
    138                 echo "ПОМИЛКА! ВКАЗАНО НЕПРАВИЛЬНИЙ НОМЕР ТОВАРУ\n\n";
    139                 continue;
    140             }
    141
    142             echo "\n";
    143             echo "Вибрано: " . $products[(int)$choice]['name'] . "\n";
    144             echo "Введiть кiлькiсть, штук: ";
    145             $qty = trim(fgets(STDIN));
    146
    147             if (!is_numeric($qty) || (int)$qty < 0 || (int)$qty > 99) {
    148                 echo "ПОМИЛКА! Кiлькiсть повинна бути вiд 0 до 99\n\n";
    149                 showCart($cart, $products);
    150                 continue;
    151             }
    152
    153             $qty = (int)$qty;
    154
    155             if ($qty == 0) {
    156                 if (array_key_exists($choice, $cart)) {
    157                     echo "ВИДАЛЯЮ З КОШИКА\n";
    158                     unset($cart[(int)$choice]);
    159                 }
    160             } else {
    161                 $cart[(int)$choice] = $qty;
    162             }
    163
    164             echo "\n";
    165             showCart($cart, $products);
    166         }
    167     }
    168
    169     while (true) {
    170         showMainMenu();
    171         $command = trim(fgets(STDIN));
    172
    173         if (!in_array($command, ['0', '1', '2', '3'])) {
    174             echo "ПОМИЛКА! Введiть правильну команду\n\n";
    175             continue;
    176         }
    177
    178         echo "\n";
    179
    180         if ($command == '0') {
    181             break;
    182         }
    183
    184         if ($command == '1') {
    185             chooseProduct($products, $cart);
    186         }
    187
    188         if ($command == '2') {
    189             getFinalBill($products, $cart);
    190         }
    191
    192         if ($command == '3') {
    193             setupProfile($userProfile);
    194         }
    195
    196         echo "\n";
    197     }
    198 ?>
    
2


